<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>üî• Fire Share</title>

<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

<style>
html,body{
  margin:0; padding:0; height:100%; background:#000; overflow:hidden;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}
#fire{position:fixed; inset:0; z-index:0;}
.wrap{
  position:relative; z-index:2; height:100%;
  display:flex; align-items:center; justify-content:center;
}
.btn{
  position:relative; padding:18px 48px; font-size:22px; font-weight:700;
  border:none; border-radius:56px; cursor:pointer; color:#000;
  background:linear-gradient(90deg,#ffd000,#ff7a00);
  box-shadow:0 0 18px #ff9900, 0 0 36px rgba(255,120,0,.7);
}
.btn:disabled{opacity:.6; cursor:not-allowed}
</style>
</head>

<body>
<canvas id="fire"></canvas>

<div class="wrap">
  <button id="shareBtn" class="btn" onclick="shareFlex()">üî• ‡∏Å‡∏î‡πÅ‡∏ä‡∏£‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå</button>
</div>

<script>
/* ===== Fire Particle ===== */
const c = document.getElementById('fire');
const x = c.getContext('2d');
let P=[];
function rs(){c.width=innerWidth; c.height=innerHeight}
addEventListener('resize',rs); rs();
class F{
  constructor(){this.x=Math.random()*c.width; this.y=c.height+Math.random()*80;
    this.r=Math.random()*5+3; this.v=Math.random()*1.8+1; this.a=1}
  u(){this.y-=this.v; this.a-=.014}
  d(){x.beginPath(); x.fillStyle=`rgba(255,150,0,${this.a})`;
     x.arc(this.x,this.y,this.r,0,Math.PI*2); x.fill()}
}
(function anim(){
  x.clearRect(0,0,c.width,c.height);
  if(P.length<180) P.push(new F());
  P.forEach((p,i)=>{p.u(); p.d(); if(p.a<=0) P.splice(i,1)});
  requestAnimationFrame(anim);
})();

/* ===== LIFF Share ===== */
async function shareFlex(){
  const btn=document.getElementById('shareBtn');
  btn.disabled=true;
  try{
    await liff.init({ liffId:"2008689015-qDukuXPF" });
    if(!liff.isInClient()){ alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏≠‡∏õ LINE"); btn.disabled=false; return; }

    const flex={
      type:"flex",
      altText:"‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏û‡∏¥‡πÄ‡∏®‡∏©",
      contents:{
        type:"bubble",
        size:"mega",
        styles:{ body:{backgroundColor:"#000"}, footer:{backgroundColor:"#000"} },
        hero:{
          type:"image",
          url:"https://img5.pic.in.th/file/secure-sv1/fc842ee3-6dd4-4514-8c52-edd79dabd51e.jpg",
          size:"full",
          aspectRatio:"1:1",
          aspectMode:"cover"
        },
        footer:{
          type:"box",
          layout:"vertical",
          contents:[{
            type:"button",
            style:"primary",
            action:{ type:"uri", label:"‡πÑ‡∏õ‡∏ó‡∏µ‡πà LINE Official", uri:"https://lin.ee/SX1tYto" }
          }]
        }
      }
    };

    const result = await liff.shareTargetPicker([flex]);
    if(result){
      setTimeout(()=>{ // ‡∏´‡∏ô‡πà‡∏ß‡∏á‡∏ô‡∏¥‡∏î‡πÉ‡∏´‡πâ UX ‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô
        liff.openWindow({ url:"https://lin.ee/SX1tYto", external:true });
      }, 500);
    }
  }catch(e){
    console.error(e);
    alert("‡πÅ‡∏ä‡∏£‡πå‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
  }finally{
    btn.disabled=false;
  }
}
</script>
</body>
</html>
